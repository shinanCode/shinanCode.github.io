# 上下文

## 什么是执行上下文
> `执行上下文`是评估和执行`JavaScript环境`的抽象概念。Javascript 代码在运行的时候，它都是在`执行上下文`中运行。


### 执行上下文分类
1. **全局执行上下文**：创建一个全局的` window 对象`（浏览器的情况下），并且设置 `this` 的值等于这个全局对象。一个程序中只会有一个全局执行上下文。
2. **函数执行上下文**：每当一个函数被调用时, 都会为该函数创建一个新的上下文。
3. **Eval函数执行上下文**：eval 函数内部的代码也会有它属于自己的执行上下文


## 什么是执行栈
> 也被叫做`调用栈`，是一种拥有 `LIFO（后进先出）`数据结构的栈（兵乓球盒模型），被用来存储代码运行时创建的所有执行上下文。


当 JavaScript 引擎第一次遇到你的脚本时，它会创建一个全局的执行上下文并且压入当前执行栈。每当引擎遇到一个函数调用，它会为该函数创建一个新的执行上下文并压入栈的顶部。

引擎会执行那些执行上下文位于栈顶的函数。当该函数执行结束时，执行上下文从栈中弹出，控制流程到达当前栈中的下一个上下文。


## 怎么创建执行上下文？
创建执行上下文有两个阶段
1. 创建阶段
2. 执行阶段


### 一、 创建阶段
1. this 值的决定，即我们所熟知的 This 绑定。
2. 创建词法环境组件。
3. 创建变量环境组件。


**This 绑定：**  
在全局执行上下文中，this 的值指向全局对象。(在浏览器中，this引用 Window 对象)。

在函数执行上下文中，this 的值取决于该函数是如何被调用的。如果它被一个引用对象调用，那么 this 会被设置成那个对象，否则 this 的值被设置为全局对象或者 undefined（在严格模式下）


## 参考链接
1. [[译] 理解 JavaScript 中的执行上下文和执行栈](https://juejin.cn/post/6844903682283143181)